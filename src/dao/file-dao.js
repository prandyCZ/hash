const {Pool} = require("pg")const dbConfig = require("../config/config").DB;class FileDao {  pool = this._getPool();  _getPool() {    const {user, password, host, port, name} = dbConfig;    const connectionString = `postgresql://${user}:${password}@${host}:${port}/${name}`;    return new Pool({connectionString});  }  async _queryDB(query) {    let result;    try {      const client = await this.pool.connect();      result = await client.query(query);    } catch (e) {      console.log(e);      throw e;    }    return result;  }  async createTable() {    const query = `CREATE TABLE IF NOT EXISTS ${dbConfig.table}    (        "id"        SERIAL,        "hash"        VARCHAR                   (        40                   ),        "filesize" BIGINT,        PRIMARY KEY                   (                       "id"                   )        );`;    try {      await this._queryDB(query);    } catch (e) {      console.log(e);      throw new Error("Creating table failed.");    }  }  async saveFileInfo({hash, fileSize}) {    await this.createTable();    const query = `        INSERT INTO ${dbConfig.table}(hash, filesize)        VALUES ('${hash || null}', '${fileSize || null}') RETURNING *;    `    return await this._queryDB(query);  }}module.exports = new FileDao();